(()=>{"use strict";var e=localStorage.getItem("books");e=e?JSON.parse(e):[];var t,n,o=new(function(){function t(){this.table=document.getElementById("myTable")}return t.prototype.searchBooks=function(e,t,n){return"bookId"===n?t[n].indexOf(e)>=0:t[n].toLowerCase().indexOf(e)>=0},t.prototype.display=function(t,n){void 0===t&&(t=""),void 0===n&&(n=""),this.table.innerHTML="<tr>\n            <th> Book ID</th><th> Title</th><th>Author</th><th>Rating</th><th>Action</th></tr>";for(var o=0;o<e.length;o++){var d=void 0,l=!0;t.length>0&&n.length>0&&"selected"!==n&&(this.searchBooks(t,e[o],n)||(l=!1)),l&&(d="<tr>\n                        <td>"+e[o].bookId+"</td>\n                        <td>"+e[o].title+"</td>\n                        <td>"+e[o].author+"</td>\n                        <td>"+e[o].rating+'</td>\n                        <td>\n                        <button class="delete" id="deleteId" style="border:none;background-color:inherit;">\n                       \n                        <span id="span" class="material-icons" style=color:red;">delete</span></button>\n                        \n                        </td>\n\n                        </tr>',this.table.innerHTML+=d)}},t.prototype.searchResult=function(){var e=document.getElementById("drop").value,t=document.getElementById("textSearch");this.display(t.value,e)},t.prototype.delete=function(t){e.splice(t.rowIndex-1,1),localStorage.setItem("books",JSON.stringify(e)),this.display()},t.prototype.addBook=function(){e.length;var t=document.getElementById("bookId"),n=document.getElementById("bookName"),o=document.getElementById("author"),d=document.getElementById("rating");if(""!==t.value&&""!==n.value&&""!==o.value&&""!==d.value){var l={bookId:t.value,title:n.value.toUpperCase(),author:o.value.toUpperCase(),rating:d.value};e.push(l),localStorage.setItem("books",JSON.stringify(e))}},t}());o.display(),null===(t=document.getElementById("bookList"))||void 0===t||t.addEventListener("click",(function(){var e=document.getElementById("detailsSection"),t=document.getElementById("addBookPage");"none"===e.style.display&&(e.style.display="block",t.style.display="none"),o.display()})),null===(n=document.getElementById("addBooks"))||void 0===n||n.addEventListener("click",(function(){var e=document.getElementById("detailsSection"),t=document.getElementById("addBookPage");"none"===t.style.display&&(e.style.display="none",t.style.display="block"),o.display()}));var d=document.getElementById("drop"),l=document.getElementById("textSearch"),a=document.getElementById("Searchbtn");document.querySelector("#Searchbtn").addEventListener("click",(function(){o.searchResult()})),d.addEventListener("change",(function(){var e,t;if("bookId"===d.value)e="Search by Id",t="Enter ID";else if("title"===d.value)e="Search by title",t="Enter title";else{if("author"!==d.value)return;e="Search by author",t="Enter Author"}l.placeholder=e,a.innerHTML=t})),document.getElementById("myTable").addEventListener("click",(function(e){var t=e.target;if("span"===t.id)t=e.target.parentElement.parentElement.parentElement;else{if("deleteId"!==t.id)return;t=e.target.parentElement.parentElement}o.delete(t)})),document.getElementById("submit").addEventListener("click",(function(){o.addBook()}))})();